<h2><%= @item.name %></h2> 
<h3><%= @item.category %></h3>
<%= image_tag @item.url, width: 200 %>

<% if current_user.admin? %>
  <%= link_to 'Edit this item', edit_item_path(@item) %>
  <%= button_to 'Delete this item', item_path(@item), method: :delete,
  confirm: "Are you sure you want to delete this skill?" %>
<% end %>

<h3> Current and pending reservations for <%= @item.name %>:</h3>
<% @item.reservations.each do |reservation| %>
  <div>
    <p>
      Begins at: <%= reservation.begins_at.to_formatted_s(:long) %>
      Ends at: <%= reservation.ends_at.to_formatted_s(:long) %>
      Reservation status: <%= reservation.reservation_status %>
    </p>
   <% if @item.reserved_by?(current_user) %>
     <div>
       <%= link_to 'Change this reservation', edit_reservation_path(@item.reservation)%>
     </div>
   <% end %>
  </div>
<% end %>


<h3>Make a new Reservation</h3>
<%= form_for @reservation do |form| %>
  <%= render 'reservations/error_messages', reservation: form.object %>
  <%= form.hidden_field :item_id %>
  <div>
    <%= form.label :begins_at, "Reservation Start" %>
    <%= form.datetime_select :begins_at, {start_year: Time.now.year, end_year: 2020, prompt: true, order: [:day, :month, :year]} %>
  </div>
  <div>
    <%= form.label :ends_at, "Reservation End" %>
    <%= form.datetime_select :ends_at, {start_year: Time.now.year, end_year: 2020, prompt: true, order: [:day, :month, :year]} %>
</div>
  <%= form.submit "Reserve Item" %>
<% end %>


